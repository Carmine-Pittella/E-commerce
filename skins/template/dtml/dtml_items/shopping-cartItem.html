<tr>
   <td class="cart-pic first-row">
      <img src="<[URL_IMMAGINE]>" alt="product img" style="height: 140px" />
   </td>
   <td class="cart-title first-row">
      <h5><[NOME_PRODOTTO]></h5>
   </td>
   <td class="p-price first-row"><[TAGLIA_PRODOTTO]></td>
   <td class="p-price first-row"><[PREZZO_SINGOLO]> €</td>
   <td class="qua-col first-row">
      <div class="quantity">
         <div class="pro-qty">
            <span class="dec qtybtn" onclick="setQuantita(-1)">-</span>
            <input type="text" value="<[QUANTITA]>" max="<[Q_MAX]>" disabled />
            <span class="inc qtybtn" onclick="setQuantita(+1)">+</span>
         </div>
      </div>
   </td>
   <td class="total-price first-row"><span class="tot-price-product"></span> €</td>
   <td class="close-td first-row" onclick="removeToCart()"><i class="ti-close"></i></td>
</tr>

<script>
   function removeToCart() {
      let id_prodotto = "<[ID_PRODOTTO]>";
      let taglia = "<[TAGLIA_PRODOTTO]>";

      let xhr = new XMLHttpRequest();
      xhr.open("POST", "include/php-utils/remove_to_cart.php", true);
      xhr.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
      xhr.onreadystatechange = function () {
         if (xhr.readyState === 4 && xhr.status === 200) {
            console.log(xhr.responseText);
            // Gestisci la risposta qui
         }
      };
      xhr.send("id_prodotto=" + encodeURIComponent(id_prodotto) + "&taglia=" + encodeURIComponent(taglia));
      window.location.href = window.location.href;
   }

   function setQuantita(operator) {
      let quantita = document.querySelector(".pro-qty input").value;
      quantita = parseInt(quantita) + parseInt(operator);
      if (quantita < 1) {
         quantita++;
      }
      if (quantita > parseInt("<[Q_MAX]>")) {
         quantita--;
      }

      setTotalPriceProduct(quantita);
   }

   function setTotalPriceProduct(Q) {
      let single_price = parseFloat("<[PREZZO_SINGOLO]>");
      let quantita = parseInt(document.querySelector(".pro-qty input").value);
      if (Q) {
         console.log(Q);
         quantita = Q;
      }

      let total_price = single_price * quantita;

      let totPriceSpan = document.querySelector(".tot-price-product");
      totPriceSpan.textContent = total_price.toFixed(2);
   }
   setTotalPriceProduct();
</script>
